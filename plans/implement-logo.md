# Implement praxis7.png Logo Throughout Extension

**Status**: Complete

## Objective

Replace all placeholder branding (solid purple icon PNGs, text "P" badges) with
the chosen praxis7.png logo -- a purple capture-frame with cursor and coral spark
on transparent background.

Success criteria:
- All four manifest icon sizes (16, 32, 48, 128) are high-quality resized
  versions of praxis7.png
- The editor header and popup header show the actual logo image instead of a
  gradient "P" div
- The logo renders crisply on the extension's dark backgrounds
- Build (`npx vite build`) succeeds
- All tests (`npx vitest run`) pass without changes

Scope boundaries:
- Content script toolbar: OUT OF SCOPE -- text-only "Praxis" label is fine;
  injecting an image into host pages adds payload and complexity with no user
  value at this stage
- Exported HTML footer: OUT OF SCOPE -- text "Generated by Praxis" stays as-is
- Favicon / browser tab icon for editor page: OPTIONAL stretch goal

## Context

Current state:
- `public/icons/icon-{16,32,48,128}.png` are solid purple placeholder squares
  generated by `scripts/create-placeholder-icons.cjs`
- `src/popup/App.tsx` (line 53-69) and `src/editor/App.tsx` (line 160-176)
  both render a 32x32 `<div>` with a blue-to-purple gradient containing the
  letter "P"
- Source logo is at project root: `praxis7.png` (1024x1024 RGB PNG, transparent
  background)

Why now:
- The logo has been chosen by the user; placeholder branding should be replaced
  before any public-facing use

Constraints:
- Chrome manifest icons must be square PNGs at exactly 16, 32, 48, 128px
- Extension CSP allows `img-src 'self'` -- local images in dist/ are fine
- macOS `sips` is available for resizing (no external dependencies needed)
- Popup and editor are extension pages served from the extension origin, so
  they can reference files in `public/` via paths relative to the extension root

## Approach

1. Use macOS `sips` to resize praxis7.png into 4 icon sizes, overwriting the
   existing placeholders in `public/icons/`
2. Also place a 32px copy at `public/icons/logo-32.png` for use in popup/editor
   headers (keep manifest icons separate in case we want different crops later)
3. Replace the gradient "P" `<div>` in both `App.tsx` files with an `<img>` tag
   referencing the logo via `chrome.runtime.getURL()`
4. Update the icon generation script to resize from praxis7.png instead of
   generating solid-color blocks
5. Verify build and tests

No new dependencies are required. The approach uses only built-in macOS tools
and existing project infrastructure.

## Implementation Steps

### Step 1: Generate Resized Icons

Complexity: Simple

Using `sips` (macOS built-in), resize `praxis7.png` to each required size and
write directly to `public/icons/`:

```bash
# From project root
for size in 16 32 48 128; do
  sips -z $size $size praxis7.png --out public/icons/icon-${size}.png
done
# Also create a logo copy for UI use
cp public/icons/icon-32.png public/icons/logo-32.png
```

Verify each output file:
- Is a valid PNG
- Has correct dimensions
- Has transparent background preserved

Note: `sips -z` resamples to exact pixel dimensions. The source is 1024x1024
square, so no aspect ratio issues.

### Step 2: Replace Popup Header Badge

Complexity: Simple
Dependencies: Step 1 (logo-32.png must exist in public/icons/)

In `src/popup/App.tsx`, replace lines 53-69 (the gradient "P" div):

**Before:**
```tsx
<div
  style={{
    width: '32px',
    height: '32px',
    borderRadius: '8px',
    background: 'linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%)',
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'center',
    fontSize: '16px',
    fontWeight: 800,
    color: '#ffffff',
    flexShrink: 0,
  }}
>
  P
</div>
```

**After:**
```tsx
<img
  src={chrome.runtime.getURL('icons/logo-32.png')}
  alt="Praxis"
  width={32}
  height={32}
  style={{
    borderRadius: '8px',
    flexShrink: 0,
  }}
/>
```

Key decisions:
- Use `chrome.runtime.getURL()` to get the correct extension-relative URL at
  runtime. This works because popup pages run as extension pages.
- Keep `borderRadius: '8px'` to match the existing rounded-corner aesthetic.
- Keep `flexShrink: 0` so the logo doesn't collapse in flex layouts.
- Remove the gradient background -- the logo has its own purple color and the
  dark page background shows through the transparent areas.

### Step 3: Replace Editor Header Badge

Complexity: Simple
Dependencies: Step 1 (logo-32.png must exist in public/icons/)

In `src/editor/App.tsx`, replace lines 160-176 (the gradient "P" div)
with the same `<img>` pattern as Step 2:

**Before:**
```tsx
<div
  style={{
    width: '32px',
    height: '32px',
    borderRadius: '8px',
    background: 'linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%)',
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'center',
    fontSize: '16px',
    fontWeight: 800,
    color: '#ffffff',
    flexShrink: 0,
  }}
>
  P
</div>
```

**After:**
```tsx
<img
  src={chrome.runtime.getURL('icons/logo-32.png')}
  alt="Praxis"
  width={32}
  height={32}
  style={{
    borderRadius: '8px',
    flexShrink: 0,
  }}
/>
```

### Step 4: Update Icon Generation Script

Complexity: Simple
Dependencies: None (can run in parallel with Steps 2-3)

Rewrite `scripts/create-placeholder-icons.cjs` so it resizes from praxis7.png
instead of generating solid-color blocks. This way anyone cloning the repo can
regenerate icons from the source file.

The script should:
1. Check that `praxis7.png` exists at the project root
2. Use Node.js `child_process.execSync` to call `sips` for each size
3. Also copy the 32px version to `logo-32.png`
4. Print a summary of what was created

Fallback: If `sips` is not available (non-macOS), print a helpful error message
suggesting manual resizing or using an alternative tool.

### Step 5: Build and Test Verification

Complexity: Simple
Dependencies: Steps 1-4

1. Run `npx vite build` -- verify:
   - Build succeeds without errors
   - `dist/icons/` contains all icon files (icon-16, icon-32, icon-48, icon-128,
     logo-32)
   - Manifest in dist/ references correct icon paths
2. Run `npx vitest run` -- verify:
   - All existing tests pass
   - No test changes should be needed (tests use data-testids, not visual checks)
3. Manually load the extension in Chrome via Load Unpacked:
   - Verify toolbar icon in Chrome shows the logo (not purple square)
   - Open popup -- verify header shows logo image
   - Open editor -- verify header shows logo image
   - Check that logo looks crisp at all sizes

## Dependencies

- macOS `sips` command (confirmed available at `/usr/bin/sips`)
- `praxis7.png` at project root (confirmed: 1024x1024 PNG)
- No new npm packages required
- `chrome.runtime.getURL()` API (already used elsewhere in the codebase, e.g.,
  `src/background/index.ts` line 201)

## Testing Strategy

**Automated Tests:**
- No new tests needed -- existing tests do not assert on visual elements
- Run full suite (`npx vitest run`) to confirm no regressions
- Specifically verify popup and editor component tests still pass since we are
  modifying their TSX

**Build Verification:**
- `npx vite build` must succeed
- Verify `dist/icons/` contains all expected files

**Manual Testing:**
- Load unpacked extension in Chrome
- Verify extension icon in toolbar (uses 16px or 32px depending on DPI)
- Open popup: logo appears in header, properly sized, rounded corners
- Open editor: logo appears in header, properly sized, rounded corners
- Check Chrome extensions page (chrome://extensions): 128px icon displays
- Confirm transparent background works on dark surfaces (no white box artifact)

**Edge Cases:**
- High-DPI displays: Chrome may use 32px icon where 16px is specified; verify
  both look good
- Very small 16px icon: ensure the capture-frame design is still recognizable

## Risks and Mitigations

| Risk | Likelihood | Impact | Mitigation |
|------|------------|--------|------------|
| 16px icon too small to read | Medium | Low | The logo's corner brackets + cursor are distinctive enough even at 16px; if not, we can create a simplified version later |
| `sips` not preserving transparency | Low | Medium | Verify alpha channel after resize; `sips` handles PNG alpha correctly by default |
| `chrome.runtime.getURL()` not available in test environment | Medium | Low | Tests mock `chrome.runtime` already; if `getURL` is not mocked, add a simple mock returning a placeholder string |
| Logo has white fringe on dark backgrounds | Low | Medium | Source has clean transparency; inspect after resize at each size |

## Open Questions

- **Favicon for editor tab?** The editor page (`src/editor/index.html`) could
  add a `<link rel="icon">` tag pointing to the 32px icon. This is a nice
  polish item but not critical. Recommend including it as a bonus in this work.
- **Should `praxis7.png` be committed to the repo or kept out?** It is currently
  at the project root. Recommend keeping it there as the source-of-truth for
  icon generation (referenced by the script). It should be committed.
